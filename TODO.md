# API Gateway 待办清单（2025-10-15）

## 最新进展
- v2 数据源 / 目标系统启停链路稳定运行，前端运行态同步完成。
- 路由规则与目标系统表单体验优化，嵌套 Schema 全量生效。
- 多协议测试脚本实战化：MQTT 主题、TCP 模拟器与真实转发对齐。
- 登录 / JWT / RBAC 闭环接入，默认管理员初始化、前后端会话与测试脚本统一完毕。
- MQTT 适配器接入真实订阅，HTTP 转发支持二进制序列化，统计与监控闭环恢复。
- 加解密能力上线：统一 CryptoService、管道解密与目标加密闭环，前端可按目标系统精细控制。
- 帧格式管理套件上线：后端 v2 API / CLI、前端模板创建 / JSON 上传 / 查看 / 删除一体化。
- 路由规则热加载 API 打通，前端可直接发布、重载并回显状态。

## 当前优先级
### P0 核心
- [ ] 数据加解密链路（后续优化：密钥轮转、异常告警、路由粒度策略）
- [x] 用户认证与访问控制（登录、JWT 签发、RBAC、中间件）
- [x] 图表与监控面板优化（协议分布、流量趋势、错误率等关键指标）

### P1 重要
- [ ] API 限流与安全防护策略（速率限制、IP 黑白名单、告警）
- [ ] WebSocket / HTTP 统一审计日志（方案设计、日志落地、权限控制）
- [ ] 监控与告警指标体系（Prometheus、日志采集、异常通知）
- [ ] 系统管理界面：补齐用户与角色管理、审计日志、任务面板

### P2 改进
- [ ] 测试基础设施优化（事件循环冲突、异步资源复用）
- [ ] Deprecation warning 清理（`datetime.utcnow()`、`ConfigDict`）
- [ ] 性能监控面板补齐（TPS、延迟、错误率）

### P3 拓展
- [ ] CI/CD 流水线
- [ ] Docker / 部署脚本优化
- [ ] 文档与示例完善（前后端联调、脚本使用说明）

## 即将启动
- ✳️ 审计日志策略设计：采集范围、数据模型、合规存储；
- ✳️ 梳理监控指标与告警触发机制，产出实现计划与所需工具。

## 明日收尾
- [ ] 回归验证：加解密 / 帧格式 / 路由热加载整链路。
- [ ] 补充帧格式 & 加解密操作文档（前端入口、CLI、字段说明）。
- [ ] 系统管理界面需求梳理：系统信息、任务调度、用户管理。
- [ ] 审计日志策略草案：日志来源、字段定义、保留策略。

> 详细测试脚本和操作指引已内置于 `backend/scripts`，按需运行单独文档或脚本说明。
